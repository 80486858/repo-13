---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "grafana-adaptive-metrics_ruleset Resource - terraform-provider-grafana-adaptive-metrics"
subcategory: ""
description: |-
  
---

# grafana-adaptive-metrics_ruleset (Resource)



## Example Usage

```terraform
# Apply an inline ruleset
resource "grafana-adaptive-metrics_ruleset" "default" {
  rules = [
    {
      "metric" : "cpu_usage_seconds_total",
      "drop_labels" : [
        "instance"
      ],
      "aggregations" : [
        "sum:counter"
      ],
    }
  ]
}

# Apply a ruleset from a file
resource "grafana-adaptive-metrics_ruleset" "default" {
  rules = jsondecode(file("${path.module}/rules.json"))
}

# Apply the latest recommendations on each apply
data "grafana-adaptive-metrics_recommendations" "default" {
  verbose = true
}

resource "grafana-adaptive-metrics_ruleset" "default" {
  # stable_sort_rules ensures that the rules are always applied in the same order, regardless of the ordering of the recommendations
  rules = provider::grafana-adaptive-metrics::stable_sort_rules(data.grafana-adaptive-metrics_recommendations.default.recommendations)
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `rules` (Attributes List) (see [below for nested schema](#nestedatt--rules))

### Optional

- `segment` (String) WARNING: contact Grafana Cloud support before use. This feature is in private preview and may change without notice, including in ways that may break your configuration. The name of the segment to aggregate metrics for.

<a id="nestedatt--rules"></a>
### Nested Schema for `rules`

Required:

- `metric` (String) The name of the metric to be aggregated.

Optional:

- `aggregation_delay` (String) The delay until aggregation is performed.
- `aggregation_interval` (String) The interval at which to generate the aggregated series.
- `aggregations` (List of String) The array of aggregation types to calculate for this metric.
- `drop` (Boolean) Set to true to skip both ingestion and aggregation and drop the metric entirely.
- `drop_labels` (List of String) The array of labels that will be aggregated.
- `keep_labels` (List of String) The array of labels to keep; labels not in this array will be aggregated.
- `match_type` (String) Specifies how the metric field matches to incoming metric names. Can be 'prefix', 'suffix', or 'exact', defaults to 'exact'.
